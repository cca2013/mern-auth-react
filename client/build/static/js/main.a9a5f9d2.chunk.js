(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){},44:function(e,t,a){e.exports=a(85)},49:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),s=a.n(c),l=(a(49),a(8)),o=a(9),i=a(11),u=a(10),p=a(12),m=a(90),d=a(88),h=a(92),f=a(22),b=a.n(f),v=a(4),E=a.n(v),g=function(e){e?E.a.defaults.headers.common.Authorization=e:delete E.a.defaults.headers.common.Authorization},w=function(e){return{type:"SET_CURRENT_USER",payload:e}},y=function(){return function(e){localStorage.removeItem("jwtToken"),g(!1),e(w({}))}},O=a(6),j=a(18),N=a(41),x=a(19),k=a(76),S={isAuthenticated:!1,user:{},loading:!1},C={},R=Object(j.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(x.a)({},e,{isAuthenticated:!k(t.payload),user:t.payload});case"USER_LOADING":return Object(x.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),T=[N.a],_=Object(j.e)(R,{},Object(j.d)(j.a.apply(void 0,T),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()||j.d)),A=a(87),D=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper white"},r.a.createElement(A.a,{to:"/",style:{fontFamily:"monospace"},className:"col s5 brand-logo center black-text"},r.a.createElement("i",{className:"material-icons"},"code"),"MERN"))))}}]),t}(n.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Build")," a login/auth app with the"," ",r.a.createElement("span",{style:{fontFamily:"monospace"}},"MERN")," stack from scratch"),r.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Create a (minimal) full-stack app with user authentication via passport and\xa0JWTs"),r.a.createElement("br",null),r.a.createElement("div",{className:"col s6"},r.a.createElement(A.a,{to:"/register",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Register")),r.a.createElement("div",{className:"col s6"},r.a.createElement(A.a,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect white black-text"},"Log In")))))}}]),t}(n.Component),L=a(15),U=a(91),I=a(20),F=a.n(I),M=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(L.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(A.a,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(A.a,{to:"/login"},"Log in"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",className:F()("",{invalid:e.name})}),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("span",{className:"red-text"},e.name)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:F()("",{invalid:e.email})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:F()("",{invalid:e.password})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",className:F()("",{invalid:e.password2})}),r.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),r.a.createElement("span",{className:"red-text"},e.password2)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Sign up"))))))}}]),t}(n.Component),B=Object(O.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){E.a.post("/api/users/register",e).then(function(e){return t.push("/login")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(U.a)(M)),G=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(L.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement(A.a,{to:"/",className:"btn-flat waves-effect"},r.a.createElement("i",{className:"material-icons left"},"keyboard_backspace")," Back to home"),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Login")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",r.a.createElement(A.a,{to:"/register"},"Register"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:F()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:F()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),J=Object(O.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){E.a.post("/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),g(a);var n=b()(a);t(w(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(G),W=a(43),z=a(89),V=Object(O.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(W.a)(e,["component","auth"]);return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(z.a,{to:"/login"})}}))}),X=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onLogoutClick=function(e){e.preventDefault(),a.props.logoutUser()},a.routeChange=function(e){a.props.history.push({pathname:"/products",state:{title:e}})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.auth.user;return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"landing-copy col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Hey there,")," ",e.name.split(" ")[0]," with user id ",e.id,r.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"You are logged into a full-stack"," ",r.a.createElement("span",{style:{fontFamily:"monospace"}},"MERN  ")," app \ud83d\udc4f")),r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Logout"),r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.routeChange.bind(this,e.id),className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Products"))))}}]),t}(n.Component),q=Object(O.b)(function(e){return{auth:e.auth}},{logoutUser:y})(X),Y=a(2),H=a.n(Y),$=a(5),K=a(21),Q={getAll:function(){var e=Object($.a)(H.a.mark(function e(t){var a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/product/:user",t);case 2:return a=e.sent,e.abrupt("return",a.data||[]);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),createProduct:function(){var e=Object($.a)(H.a.mark(function e(t){var a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/product",t);case 2:return a=e.sent,e.abrupt("return",a.data||[]);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),deleteProduct:function(){var e=Object($.a)(H.a.mark(function e(t){var a,n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={Accept:"string","Content-Type":"string"},e.next=3,E.a.post("/api/removeProduct",a,t);case 3:return n=e.sent,e.abrupt("return",n.data||[]);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()};Object.freeze({id:""});var Z=function(e){var t=Object(n.useState)(null),a=Object(K.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(null),o=Object(K.a)(l,2),i=(o[0],o[1],0),u=e.location.state.title;Object(n.useEffect)(function(){c||p()});var p=function(){var e=Object($.a)(H.a.mark(function e(t){var a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.getAll({value:u});case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),m=function(){e.history.push({pathname:"/deleteproducts",state:{title:u}})};return r.a.createElement("div",null,r.a.createElement("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:function(t){e.history.push({pathname:"/addproducts",state:{title:t}})}.bind(this,u),className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Add New Product"),r.a.createElement("button",{style:{width:"200px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:m,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Delete by ID"),r.a.createElement("ul",null,r.a.createElement("h3",null,r.a.createElement("p",null,"  \u03a0\u03a1\u039f\u0399\u039f\u039d\u03a4\u0391 "),"  ",r.a.createElement("p",null,"\u03a7Y\u03a3\u03a4\u0397:  ",u," ")),c&&c.length>0?c.map(function(e){return r.a.createElement("div",null,r.a.createElement("li",{key:e.user},r.a.createElement("p",null,"---------------------------------------------------------------"),r.a.createElement("p",null,"\u0391\u0391: ",i+=1),r.a.createElement("p",null,"\u0395\u0399\u0394\u039f\u03a3:      ",e.name),r.a.createElement("p",null),r.a.createElement("p",null,r.a.createElement("img",{src:e.image,width:"300",height:"300"})),r.a.createElement("p",null,"\u03a0\u0395\u03a1\u0399\u0393\u03a1\u0391\u03a6\u0397:    ",e.description),r.a.createElement("p",null," "),r.a.createElement("p",null,"\u039a\u03a9\u0394\u0399\u039a\u039f\u03a3 \u03a0\u03a1\u039f\u0399\u039f\u039d\u03a4\u039f\u03a3:"),r.a.createElement("p",null,"  ",e._id," ")))}):r.a.createElement("p",null,"No products found")))};a(36);var ee=function(e){var t=e.location.state.title,a=Object(n.useState)({name:"",description:"",user:t,image:""}),c=Object(K.a)(a,4),s=c[0],l=c[1],o=(c[2],c[3],function(e){var t=e.target,a=t.value,n=t.name;l(Object(x.a)({},s,Object(L.a)({},n,a)))}),i=function(){var t=Object($.a)(H.a.mark(function t(){var a;return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.history.push({pathname:"/products",state:{title:s.user}}),t.next=3,fetch("/api/product",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)});case 3:200!==(a=t.sent).status&&alert("Request failed: ".concat(a.status));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:i},r.a.createElement("h2",null,"Add your product"),r.a.createElement("label",null,"Name*:"),r.a.createElement("input",{type:"input",name:"name",id:"name",value:s.name,onChange:function(e){return o(e)}}),r.a.createElement("label",null,"Description*:"),r.a.createElement("input",{type:"input",name:"description",id:"description",value:s.description,onChange:function(e){return o(e)}}),r.a.createElement("input",{type:"hidden",name:"user",id:"user",value:s.user,onChange:function(e){return o(e)}}),r.a.createElement("label",null,"Image*:"),r.a.createElement("input",{type:"input",name:"image",id:"image",value:s.image,onChange:function(e){return o(e)}}),r.a.createElement("button",{type:"submit"},"Submit"))};var te=function(e){var t,a=e.location.state.title,c=Object(n.useState)({id:""}),s=Object(K.a)(c,2),l=s[0],o=s[1],i=function(){var e=Object($.a)(H.a.mark(function e(t,a){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/removeProduct",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)}).then(function(e){return e.ok?e.json():alert("deletion not posted")}).then(function(e){alert(e)});case 2:e.sent;case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var t=Object($.a)(H.a.mark(function t(){return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.history.push({pathname:"/products",state:{title:a}});case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),p=function(){var e=Object($.a)(H.a.mark(function e(t){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,i();case 3:o({id:""});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:p},r.a.createElement("h2",null,"Product id, paste here:"),r.a.createElement("label",null,"ID:"),r.a.createElement("input",{type:"text",required:!0,value:l.id,onChange:(t="id",function(e){var a=e.target.value;o(function(e){return Object(x.a)({},e,Object(L.a)({},t,a))})})}),r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("button",{onClick:u},"Go back"))};a(83);if(localStorage.jwtToken){var ae=localStorage.jwtToken;g(ae);var ne=b()(ae);_.dispatch(w(ne));var re=Date.now()/1e3;ne.exp<re&&(_.dispatch(y()),window.location.href="./login")}var ce=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{store:_},r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(D,null),r.a.createElement(d.a,{exact:!0,path:"/",component:P}),r.a.createElement(d.a,{exact:!0,path:"/register",component:B}),r.a.createElement(d.a,{exact:!0,path:"/login",component:J}),r.a.createElement(d.a,{exact:!0,path:"/products",component:Z}),r.a.createElement(d.a,{exact:!0,path:"/addproducts",component:ee}),r.a.createElement(d.a,{exact:!0,path:"/deleteproducts",component:te}),r.a.createElement(h.a,null,r.a.createElement(V,{exact:!0,path:"/dashboard",component:q})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,2,1]]]);
//# sourceMappingURL=main.a9a5f9d2.chunk.js.map